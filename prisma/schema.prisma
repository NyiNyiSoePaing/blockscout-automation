generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  created_at   DateTime @default(now()) @map("created_at")
  updated_at   DateTime @default(now()) @map("updated_at")
  
  // Relations
  blockscout_servers BlockscoutServer[]
  rpc_servers        RpcServer[]
  
  @@map("project")
}

model RpcServer {
  id           Int         @id @default(autoincrement())
  project_id    Int         @map("project_id")
  network_type  network_type @map("network_type")
  server_url    String?     @map("server_url")
  droplet_id    String?     @map("droplet_id")
  ip_address    String?     @map("ip_address")
  chain_id      String?     @map("chain_id")
  is_active     Boolean     @default(true) @map("is_active")
  status       Status?
  description  String?
  created_at    DateTime    @default(now()) @map("created_at")
  updated_at    DateTime    @default(now()) @map("updated_at") 
  
  // Relations
  project      Project @relation(fields: [project_id], references: [id], onDelete: Cascade)
  
  @@map("rpc_servers")
}

model BlockscoutServer {
  id           Int         @id @default(autoincrement())
  project_id    Int         @map("project_id")
  network_type  network_type @map("network_type")
  server_url    String?     @map("server_url")
  droplet_id    String?     @map("droplet_id")
  ip_address    String?     @map("ip_address")
  chain_id      String?     @map("chain_id")
  currency     String?     @map("currency")
  logo_url     String?     @map("logo_url")
  rpc_url      String?     @map("rpc_url")
  network_link String?     @map("network_link")
  footer_link  String?     @map("footer_link")
  is_active     Boolean     @default(true) @map("is_active")
  status       Status?
  description  String?
  created_at    DateTime    @default(now()) @map("created_at")
  updated_at    DateTime    @default(now()) @map("updated_at")
  
  // Relations
  project      Project @relation(fields: [project_id], references: [id], onDelete: Cascade)
  
  @@map("blockscout_servers")
}

enum network_type {
  mainnet
  testnet
}

enum Status {
  provisioning
  ready_to_domain_setup
  running
  ssl_setup_started
  ssl_failed
  failed
}